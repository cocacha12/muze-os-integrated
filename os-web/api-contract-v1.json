{
  "name": "muze-os-api",
  "version": "1.0.0",
  "basePath": "/api",
  "principles": [
    "single-source-of-truth",
    "append-only-events",
    "idempotent-mutations",
    "stable-resource-naming",
    "backward-compatible-evolution"
  ],
  "resources": {
    "tasks": {
      "list": "GET /api/tasks",
      "get": "GET /api/tasks/:id",
      "create": "POST /api/tasks",
      "update": "PATCH /api/tasks/:id",
      "notes": "GET|POST /api/tasks/:id/notes"
    },
    "finance": {
      "summary": "GET /api/finance/summary",
      "configGet": "GET /api/finance/config",
      "configPatch": "PATCH /api/finance/config"
    },
    "commercial": {
      "summary": "GET /api/commercial-summary",
      "quotesList": "GET /api/commercial/quotes",
      "quotesUpsert": "POST /api/commercial/quotes",
      "projectsList": "GET /api/commercial/projects",
      "projectsUpsert": "POST /api/commercial/projects"
    },
    "events": {
      "list": "GET /api/events",
      "append": "POST /api/events",
      "ack": "POST /api/events/ack"
    },
    "os": {
      "summary": "GET /api/os-summary",
      "consistency": "GET /api/consistency-health",
      "disciplineScore": "GET /api/discipline-score"
    }
  },
  "idempotency": {
    "requiredFor": [
      "POST /api/tasks",
      "PATCH /api/tasks/:id",
      "PATCH /api/finance/config",
      "POST /api/commercial/quotes",
      "POST /api/events"
    ],
    "header": "Idempotency-Key"
  },
  "eventModel": {
    "schemaVersion": "number (current=1)",
    "eventId": "string",
    "ts": "ISO-8601",
    "source": "dm|consulting|roadmap|system|api",
    "channel": "dm|consulting|roadmap|system",
    "type": "task_mutation|finance_mutation|quote_mutation|canvas_published|policy_change|task_note_add|event_ack",
    "entityId": "string",
    "before": "object|null",
    "after": "object|null",
    "ackForEventId": "string (only event_ack)",
    "status": "delivered|failed|pending (only event_ack)",
    "meta": "object"
  }
}
