{
  "name": "muze-os-api",
  "version": "1.2.0",
  "basePath": "/",
  "principles": [
    "single-source-of-truth",
    "append-only-events",
    "idempotent-mutations",
    "stable-resource-naming",
    "backward-compatible-evolution"
  ],
  "resources": {
    "tasks": {
      "list": "GET /api/tasks",
      "get": "GET /api/tasks/:id",
      "create": "POST /api/tasks",
      "update": "PATCH /api/tasks/:id",
      "delete": "DELETE /api/tasks/:id",
      "filters": [
        "owner",
        "status"
      ]
    },
    "projects": {
      "list": "GET /api/projects",
      "get": "GET /api/projects/:id",
      "create": "POST /api/projects",
      "update": "PATCH /api/projects/:id",
      "delete": "DELETE /api/projects/:id"
    },
    "quotes": {
      "list": "GET /api/quotes",
      "get": "GET /api/quotes/:id",
      "create": "POST /api/quotes",
      "update": "PATCH /api/quotes/:id",
      "delete": "DELETE /api/quotes/:id",
      "filters": [
        "projectId"
      ]
    },
    "finance": {
      "summary": "GET /api/finance/summary",
      "revenues": {
        "list": "GET /api/finance/revenues",
        "get": "GET /api/finance/revenues/:id",
        "create": "POST /api/finance/revenues",
        "update": "PATCH /api/finance/revenues/:id",
        "delete": "DELETE /api/finance/revenues/:id"
      },
      "expenses": {
        "list": "GET /api/finance/expenses",
        "get": "GET /api/finance/expenses/:id",
        "create": "POST /api/finance/expenses",
        "update": "PATCH /api/finance/expenses/:id",
        "delete": "DELETE /api/finance/expenses/:id"
      }
    },
    "accounts": {
      "list": "GET /api/accounts",
      "get": "GET /api/accounts/:id",
      "create": "POST /api/accounts",
      "update": "PATCH /api/accounts/:id",
      "delete": "DELETE /api/accounts/:id"
    },
    "commercial": {
      "summary": "GET /api/commercial-summary",
      "generateQuote": "POST /api/commercial/generate-quote"
    },
    "collaboration": {
      "updates": {
        "list": "GET /api/tasks/updates?taskId=:taskId",
        "create": "POST /api/tasks/updates"
      },
      "files": {
        "list": "GET /api/tasks/files?taskId=:taskId",
        "create": "POST /api/tasks/files"
      },
      "activity": {
        "list": "GET /api/tasks/activity?taskId=:taskId"
      }
    },
    "events": {
      "append": "POST /api/events"
    },
    "os": {
      "consistency": "GET /api/consistency-health",
      "disciplineScore": "GET /api/discipline-score"
    }
  },
  "idempotency": {
    "requiredFor": [
      "POST /api/tasks",
      "PATCH /api/tasks/:id",
      "POST /api/projects",
      "POST /api/quotes",
      "POST /api/events",
      "POST /api/finance/revenues",
      "POST /api/finance/expenses",
      "POST /api/accounts"
    ],
    "header": "Idempotency-Key"
  },
  "eventModel": {
    "schemaVersion": 1,
    "eventId": "string",
    "ts": "ISO-8601",
    "source": "dm|consulting|roadmap|system|api|finance-agent|commercial-agent",
    "channel": "dm|consulting|roadmap|system",
    "type": "task_mutation|finance_mutation|quote_mutation|account_mutation|canvas_published|policy_change|task_note_add|event_ack",
    "entityId": "string",
    "before": "object|null",
    "after": "object|null",
    "meta": "object"
  },
  "schemas": {
    "task": {
      "id": "UUID (read-only)",
      "title": "Short summary of the task",
      "objective": "Detailed description of what needs to be done",
      "owner": "Name or ID of the assigned person/agent",
      "status": "backlog|todo|doing|done|cancelled",
      "priority": "low|medium|high|critical",
      "area": "finance|commercial|consulting|system",
      "due_date": "ISO-8601 date",
      "linked_project_id": "UUID of the associated project",
      "linked_quote_id": "UUID of the associated quote"
    },
    "project": {
      "project_id": "UUID",
      "name": "Project name",
      "stage": "lead|meeting|proposal|negotiation|won|lost",
      "amount": "Number",
      "account_id": "UUID of the client company"
    },
    "finance_revenue": {
      "id": "UUID",
      "net": "Net amount",
      "iva": "IVA amount (19%)",
      "total": "Total amount",
      "status": "pending|paid",
      "issued_at": "ISO-8601"
    }
  }
}